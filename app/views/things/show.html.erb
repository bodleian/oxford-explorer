<% content_for :title, @thing.title + " - " %>

<% content_for :structural_nav do %>

<% end %>

<div class="mapette-container row">
	<div class="twelve columns mapette">
	</div>
</div>


<div class="row">
	<div class="one column inst-<%= @thing["gfs_institution_id"].downcase %>-bg center">
    <%= link_to @thing["gfs_institution_id"], institution_path(@thing["gfs_institution_id"]) %></div>

	<div class="eleven columns">
		<h1 class="buffer"><%= @thing.title %></h1>

    <% if @thing.authors.size > 0 %>

      <h5>By
        <%= @thing.authors.collect {|author| link_to(author, person_path(author))}.join('; ').html_safe %>
      </h5>

    <% end %>

	</div>
</div>

<div class="row">
	<div class="offset-by-one seven columns blurb">

    <% if @thing.description %>
		  <p><%= @thing.description %></p>
    <% end %>

    <h6>Subjects</h6>
		<p>
		<% links = @thing.subjects.collect do |subject| %>
		  <% link_to subject, subject_path(subject) %>
		<% end %>
		<%= links.to_sentence.html_safe %>
		</p>

	</div>
	<div class="offset-by-one three columns stats" style="margin-top:-24px">

		<ul style="list-style: circle;">
			<li style="color:red">Has <a href="#">digital metadata</a>!</li>
			<li style="color:red">No digitised version :-(</li>
		</ul>

	</div>
</div>

<div class="row" style="margin-top: 20px; margin-bottom: 60px;">

	<!-- if pubyear clean -->
	<div class="offset-by-one three columns">
		<h6>Published in</h6>
		<%= @thing["gfs_pubyear_clean"] %>
	</div>

	<!-- if department -->
	<div class="three columns">
		<h6>Department</h6>
		<%= @thing["gfs_department"] %>
	</div>

	<!-- if item type -->
	<div class="three columns">
		<h6>Type of thing</h6>
		<% links = @thing.types_of_things.collect do |type_of_thing| %>
		  <% link_to type_of_thing.name, item_type_path(type_of_thing.name) %>
		<% end %>
		<%= links.to_sentence.html_safe %>
	</div>

</div>


<h3>Debugging code-splat</h3>
<p><em>This is a raw version of the data we're working with. Any bits you see with the prefix of <code>gfs_</code> are generated by us to try to map the different data sources together. We call them "superfields".</em></p>

<pre><%= raw Rinku.auto_link(@thing.to_yaml) %></pre>
