<div>
  <% if collection.digitized_metadata_size_int && collection.size_int && collection.size_int > 0 %>
    <svg id="collection-pie" class="<%= collection.institution_id %>" width="78" height="78" viewbox="0 0 78 78">
      <% if collection.digitized_size_int > 0 %>
        <% end_angle = (collection.digitized_size_int.to_f / collection.size_int * 360).floor %>
        <path transform="rotate(-90,39,39)" d="<%= describe_pie_slice(39,39,37,0,end_angle, false) %>" class="digitised" />
      <% end %>
      <% end_angle = (collection.digitized_metadata_size_int.to_f / collection.size_int * 360).floor %>
      <% if end_angle >= 360 %>
        <circle cx="39" cy="39" r="37" class="pie full" />
      <% else %>
        <circle cx="37" cy="37" r="37" class="pie" />
        <path transform="rotate(-90,39,39)" d="<%= describe_pie_slice(39,39,37,0,end_angle) %>" class="slice">
      <% end %>
    </svg>
  <% else %>
    <svg id="collection-pie" class="<%= collection.institution_id %>" width="78" height="78" viewbox="0 0 78 78">
      <rect x="0" y="0" width="75" height="75" />
    </svg>
  <% end %>

</div>

